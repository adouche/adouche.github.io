## Why stal/IX. Part 2
<sup> May 29, 2022 </sup>

#stal/IX #filesystem #staticlinking

Prereq: [Part 1](blog/9_Stalix1.md)

Many times I promised to write about why I created my own Linux distribution and why it is designed this way.

### Part two. Why this way, not otherwise

**Directory structure**

Everything is quite simple here, I don’t understand how nowadays one can make a new distribution according to the LSB/FHS [https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard](https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard).

This is some kind of terrible legacy left over from the times of the Unix beginning, with a bunch of poorly solved problems (dll hell, atomic updates (ostree is a hack, and don't try to convince me otherwise)).

FS should be a content addressable storage, like git/nix/guix.

So we get almost free, just to name a few:
- Multiversioning;
- Fast rollovers and rollbacks;
- Atomic updates (switching the entire configuration - switching 1 symlink);
- Free caching of build artifacts in the batch system;
- Non-root/user package management. This is a direct consequence of content adressable storage.

**Functional configuration management**

The point is that, in fact, the contents of etc/ are determined by a number of #realm settings, and a description of the package base.<br>
You can’t go into etc/ with your hands, it is generated by the #realm preparation scripts, and in general, read-only.

I won’t write much here, who knows, he understands, and I still won’t explain to the rest in 2 sentences.

**Static linking**

A good text with a summary, why the main complaints about static linking do not stand up to serious criticism - [https://gavinhoward.com/2021/10/static-linking-considered-harmful-considered-harmful/](https://gavinhoward.com/2021/10/static-linking-considered-harmful-considered-harmful/).

I think you already understood that I consider Linus still that ghoul, but the enemy of my enemy is my friend - [https://lore.kernel.org/lkml/CAHk-=whs8QZf3YnifdLv57+FhBi5_WeNTG1B-suOES=RcUSmQg@mail.gmail.com/](https://lore.kernel.org/lkml/CAHk-=whs8QZf3YnifdLv57+FhBi5_WeNTG1B-suOES=RcUSmQg@mail.gmail.com/).

- Tooling for static linking is still better because it's as simple as ABC;

- Judging by the forums, in Linux there is an eternal problem with dynamically loaded plugins - something was not found at runtime, and because of this nothing works. I have linked - it means that the declared functionality will be available;

- The resulting binaries, despite some duplication of the object code, are faster;

- FS is cleaner, there is no unnecessary garbage, I can tell about each file what it does. In nix/guix, for example, there can be dozens of variants of the same library, this is ungrepable noodles;

- As a consequence, it is aesthetically easier to have different versions of the same library, because they do not annoy the eyes;

- Personal factor. For the last 15 years I’ve been implanting static linking in Yandex, and, in general, I have succeeded in this. I have the ambition to show the world that based on this model, you can get a full-fledged, not a toy, distribution. Toy ones, such as stali, oasis, and so on - this, excuse me, is a school craft against the background of what I have already done.

**Healthy minimalism. The possibility to view the entire system**

No code bloat, no systemd, no pipewire(?), etc.<br>
Overall, no vendor lock on RedHat/IBM software.

The Red Hats really want to lock down the Linux ecosystem on themselves. On systemd, on gstreamer, as part of pipewire, etc.<br>
I don’t see anything good in this, all this software interferes the ability to understand how the system works.

I’ll just briefly note here that I don’t mind if someone makes a variant stal/IX on top of systemd, I don’t interfere with this, and I’m even ready to help.

Look through this [folder](https://git.sr.ht/~pg/ix/tree/main/item/pkgs/bin/dbus), even runit scripts are not part of the main package, so that you can have systemd/s6/etc units in parallel.
